<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>react-native-course - Animations module</title>
    <meta
      name="description"
      content="rolling-scopes-school/react-native-course - react module"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../reveal-js/dist/reset.css" />
    <link rel="stylesheet" href="../reveal-js/dist/reveal.css" />
    <link
      rel="stylesheet"
      href="../reveal-js/dist/theme/white.css"
      id="theme"
    />
    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="../reveal-js/plugin/highlight/monokai.css" />
    <link rel="stylesheet" href="../reveal-js/common.css" />
  </head>
  <body>
    <div class="reveal">
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <!-- 0 slide -->
        <section class="presentation-name-slide">
          <h4>Animations in React Native</h4>

          <aside class="notes">
            Navigation is an important part of mobile development
          </aside>
        </section>
        <section class="agenda-slide">
          <h4 class="slide-name">Agenda</h4>
          <ul>
            <li class="fragment">What is animation?</li>
            <li class="fragment">
              How animation can be done in React Native. A brief overview.
            </li>
            <li class="fragment">Animated API</li>
            <li class="fragment">LayoutAnimation API</li>
            <li class="fragment">Reanimated</li>
            <li class="fragment">Third-party solutions for animations</li>
            <li class="fragment">Conclusion and QA session</li>
          </ul>
          <aside class="notes">
            On this slide you can see today’s agenda.
            <br /><br />
            We will start by talking about what animation is in general and how
            it can be done in React Native.
            <br /><br />
            Here we'll try animating with translation prop directly in JS thread
            and talk about why it is not a good idea. What React Native provides
            in terms of animation (Animated and LayoutAnimations APIs) and what
            are community provided solutions (Reanimated, Lottie, Rive to name a
            few)
            <br /><br />
            Next we'll dive into Animated API by checking code examples and
            discussing its limitations.
            <br /><br />
            LayoutAnimation is our next stop after which we'll take a closer
            look on Reanimated - the most popular and complex third-party
            solution for animation in React Native. What's the reasoning behind
            this library? What are the benefits over Animated and
            LayoutAnimation APIs? Of course there will be a coding section with
            hands on experience here.
            <br /><br />
            Last but not least, we'll try some other third party solutions for
            some really complex animations, like Lottie and more recent Rive
            libraries.
            <br /><br />
            At the end of all that, we'll have plenty time for QA and some
            conclusions. Buckle up and let's get started!
          </aside>
        </section>
        <!-- 1 slide -->
        <section class="picture-slide">
          <h4 class="slide-name">What is animation?</h4>
          <img
            src="assets/images/intro.gif"
            width="400"
            alt="intro animation"
          />
          <aside class="notes">
            As stated in Wikipedia “Animation is a method by which still figures
            are manipulated to appear as moving images.”
          </aside>
        </section>
        <!-- 2 slide -->
        <section class="several-pictures-3-slide">
          <h4 class="slide-name">Animations in mobile applications</h4>
          <div>
            <div class="fragment" data-fragment-index="1">
              <img
                src="assets/images/Animation_ex1.gif"
                height="500"
                alt="Example of animation"
              />
            </div>
            <div class="fragment" data-fragment-index="2">
              <img
                src="assets/images/Animation_ex2.gif"
                height="500"
                alt="Example of animation"
              />
            </div>
            <div class="fragment" data-fragment-index="3">
              <img
                src="assets/images/Animation_ex1.gif"
                height="500"
                alt="Example of animation"
              />
            </div>
          </div>
          <aside class="notes">
            In terms of mobile applications it is basically smoothly taking an
            object from one state to another. Animations allow you to convey
            physically believable motion in your interface. This way we can keep
            application users engaged and it can help to improve user experience
            on the whole.
          </aside>
        </section>
        <section class="several-pictures-2-slide">
          <h4 class="slide-name">How animation can be done in React Native</h4>
          <div>
            <div>
              <ol>
                <li class="fragment" data-fragment-index="1">JavaScript</li>
                <li class="fragment" data-fragment-index="2">
                  React Native APIs:
                  <ul class="fragment" data-fragment-index="3">
                    <li>Animated API</li>
                    <li>LayoutAnimation API</li>
                  </ul>
                </li>
                <li class="fragment" data-fragment-index="4">
                  Third-party solutions:
                  <ul class="fragment" data-fragment-index="5">
                    <li>Reanimated</li>
                    <li>Lottie</li>
                    <li>Rive and others</li>
                  </ul>
                </li>
              </ol>
            </div>
            <div class="fragment" data-fragment-index="6">
              <img
                src="assets/images/threads.png"
                alt="animation threads"
                width="60%"
              />
            </div>
          </div>
          <aside class="notes">
            There are different ways we can animated objects in RN. It can be
            done by simply using object properties changed in time via timeouts.
            Or we can use platform built-in APIs to animate things. Lastly we
            can go for third-party solutions to make things work. On top of that
            we should be aware that animation can run in either JS thread or UI
            thread. Let’s explore the mentioned options and discuss their pros
            and cons.
          </aside>
        </section>
        <section class="stack-preset">
          <section data-auto-animate class="code-example-slide">
            <h4 class="slide-name">Animation with plain JavaScript</h4>
            <pre data-id="code-animation">
              <code class="hljs" data-trim data-line-numbers>
                import React, { useState } from 'react';
                import { Button, SafeAreaView, View } from 'react-native';
                import { styles } from './screens.styles';

                export const PlainJsScreen: React.FC = () => {
                  return (
                    &lt;SafeAreaView style={styles.wrapper}&gt;
                      &lt;View style={styles.screenContainer}&gt;
                        &lt;View style={styles.ball} /&gt;
                        &lt;View style={styles.button}&gt;
                          &lt;Button title="Animate!" /&gt;
                        &lt;/View&gt;
                        &lt;View style={styles.button}&gt;
                          &lt;Button title="Reset" /&gt;
                        &lt;/View&gt;
                      &lt;/View&gt;
                    &lt;/SafeAreaView&gt;
                  );
                };
              </code>
            </pre>
            <aside class="notes">
              If you’re familiar with front-end web development, the first idea
              that may come to mind is animate objects using JavaScript. With
              React it can be done easily using state and object properties.
              Let’s animate an object to go up from its initial position using
              the transform property. Here's a basic screen with "Ball" object
              that we're going to animate and two buttons: Animate and Reset. As
              you can see they do nothing yet.
            </aside>
          </section>
          <section data-auto-animate class="code-example-slide">
            <h4 class="slide-name">Animation with plain JavaScript</h4>
            <pre data-id="code-animation">
              <code class="hljs" data-trim data-line-numbers="6-12">
                import React, { useState } from 'react';
                import { Button, SafeAreaView, View } from 'react-native';
                import { styles } from './screens.styles';

                export const PlainJsScreen: React.FC = () => {
                  const [translation, setTranslation] = useState(0);

                  const onAnimatePress = () => {
                    for (let i = -100; i < 0; i++) {
                      setTimeout(() => setTranslation(i), 10 * -i);
                    }
                  };

                  return (
                    &lt;SafeAreaView style={styles.wrapper}&gt;
                      &lt;View style={styles.screenContainer}&gt;
                        &lt;View
                          style={[
                            styles.ball,
                            {
                              transform: [{ translateY: translation }],
                            },
                          ]}
                        /&gt;
                        &lt;View style={styles.button}&gt;
                          &lt;Button title="Animate!" onPress={onAnimatePress} /&gt;
                        &lt;/View&gt;
                        &lt;View style={styles.button}&gt;
                          &lt;Button title="Reset" onPress={() => setTranslation(0)} /&gt;
                        &lt;/View&gt;
                      &lt;/View&gt;
                    &lt;/SafeAreaView&gt;
                  );
                };
              </code>
            </pre>
            <aside class="notes">
              Next we need to add state for our translation value and animation
              function that will change this value over time.
            </aside>
          </section>
          <section data-auto-animate class="code-example-slide">
            <h4 class="slide-name">Animation with plain JavaScript</h4>
            <pre data-id="code-animation">
              <code class="hljs" data-trim data-line-numbers="5-10">
                  return (
                    &lt;SafeAreaView style={styles.wrapper}&gt;
                      &lt;View style={styles.screenContainer}&gt;
                        &lt;View
                          style={[
                            styles.ball,
                            {
                              transform: [{ translateY: translation }],
                            },
                          ]}
                        /&gt;
                        &lt;View style={styles.button}&gt;
                          &lt;Button title="Animate!" onPress={onAnimatePress} /&gt;
                        &lt;/View&gt;
                        &lt;View style={styles.button}&gt;
                          &lt;Button title="Reset" onPress={() => setTranslation(0)} /&gt;
                        &lt;/View&gt;
                      &lt;/View&gt;
                    &lt;/SafeAreaView&gt;
                  );
                };
              </code>
            </pre>
            <aside class="notes">
              Next we need to add state for our translation value and animation
              function that will change this value over time.
            </aside>
          </section>
          <section data-auto-animate class="code-example-slide">
            <h4 class="slide-name">Animation with plain JavaScript</h4>
            <pre data-id="code-animation">
              <code class="hljs" data-trim data-line-numbers="12-17">
                  return (
                    &lt;SafeAreaView style={styles.wrapper}&gt;
                      &lt;View style={styles.screenContainer}&gt;
                        &lt;View
                          style={[
                            styles.ball,
                            {
                              transform: [{ translateY: translation }],
                            },
                          ]}
                        /&gt;
                        &lt;View style={styles.button}&gt;
                          &lt;Button title="Animate!" onPress={onAnimatePress} /&gt;
                        &lt;/View&gt;
                        &lt;View style={styles.button}&gt;
                          &lt;Button title="Reset" onPress={() => setTranslation(0)} /&gt;
                        &lt;/View&gt;
                      &lt;/View&gt;
                    &lt;/SafeAreaView&gt;
                  );
                };
              </code>
            </pre>
            <aside class="notes">
              Finally, let's set our function as onPress handler for our
              buttons.
            </aside>
          </section>
          <section class="picture-slide">
            <h4 class="slide-name">Animation with plain JavaScript</h4>
            <img
              src="assets/images/plain_js_animation.gif"
              alt="Animation with plain JS"
            />
            <aside class="notes">
              The result is far from perfection and you can achieve a much
              smoother animation with requestAnimationFrame. Also we can animate
              other ball properties, for instance color and size.
            </aside>
          </section>
          <section class="text-and-picture-slide">
            <h4 class="slide-name">Animation with plain JavaScript</h4>
            <div>
              <img
                src="assets/images/requestAnimationFrame.gif"
                alt="Animation with requestAnimationFrame"
                width="800"
              />
              <ul>
                <li>
                  <a
                    href="https://github.com/DenisKhatsuk/react-native-animations/tree/develop/src/screens/PlainJsScreen"
                  >
                    Code of the requestAnimationFrame example
                  </a>
                </li>
                <li>
                  <a
                    href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame"
                  >
                    Documentation on requestAnimationFrame
                  </a>
                </li>
              </ul>
            </div>
            <aside class="notes">
              This approach however has downsides. You can tell the most obvious
              one right away: even simple animations require a lot of coding
              that is pretty complex at first glance. But even more important is
              performance - animation related code will be executed in JS (main)
              thread. This means it will be calculated and executed along with
              your other JS code, which can lead to frames drop, animation being
              stuck and slowing down your app in general.
            </aside>
          </section>
          <section class="text-and-picture-slide">
            <h4 class="slide-name">Animation with plain JavaScript</h4>
            <div>
              <img
                src="assets/images/plain_js_loaded.gif"
                alt="Animation with plain JS and loaded JS thread"
                width="800"
              />
              <ol>
                <li class="fragment">Unnecessary code complexity</li>
                <li class="fragment">
                  Low performance and animation interruptions
                </li>
                <li class="fragment">
                  setState being used.
                  <a
                    href="https://legacy.reactjs.org/docs/state-and-lifecycle.html#state-updates-may-be-asynchronous"
                    >Link to docs</a
                  >
                </li>
              </ol>
            </div>
            <aside class="notes">
              If we load our JS thread, you can see how animation is delayed
              before JS thread is available again. Spot the moment we press the
              button and JS thread frames drop due to a heavy calculation - our
              animation won't start until it's free again. Another big issue is
              that we use state to animate our object position, but state may be
              asynchronous: React may batch multiple setState() calls into a
              single update for performance. So we can’t expect the state will
              be updated on every step as we programmed it and we won’t get the
              smooth animation.
            </aside>
          </section>
        </section>
        </section>
      </div>
    </div>
    <script src="https://rolling-scopes-school.github.io/react-native-course/reveal-js/dist/reveal.js"></script>
    <script src="https://rolling-scopes-school.github.io/react-native-course/reveal-js/plugin/zoom/zoom.js"></script>
    <script src="https://rolling-scopes-school.github.io/react-native-course/reveal-js/plugin/notes/notes.js"></script>
    <script src="https://rolling-scopes-school.github.io/react-native-course/reveal-js/plugin/search/search.js"></script>
    <script src="https://rolling-scopes-school.github.io/react-native-course/reveal-js/plugin/markdown/markdown.js"></script>
    <script src="https://rolling-scopes-school.github.io/react-native-course/reveal-js/plugin/highlight/highlight.js"></script>
    <script>
      var url = new URL(window.location.href);
      var showNotes = url.searchParams.has("showNotes");

      if (showNotes) {
        var head = document.getElementsByTagName("HEAD")[0];
        var link = document.createElement("link");
        link.rel = "stylesheet";
        link.type = "text/css";
        link.href =
          "https://rolling-scopes-school.github.io/react-native-course/reveal-js/speaker-notes-mobile.css";
        head.appendChild(link);
      }

      Reveal.initialize({
        disableLayout: true,
        controls: true,
        progress: true,
        center: false,
        hash: true,
        autoPlayMedia: true,
        showNotes,
        plugins: [
          RevealZoom,
          RevealNotes,
          RevealSearch,
          RevealMarkdown,
          RevealHighlight,
        ],
      });
    </script>
  </body>
</html>
